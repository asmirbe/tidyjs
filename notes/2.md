Fine based on the requirements the formatter i just sent you.

Can you improve the stream-processing parser to :

Group imports according to configured groups and ordering rules

Apply sorting rules (React first, alphabetical, by length)

Handle alignment of from keywords

Format multi-line imports with proper indentation

Split or combine imports based on the formatting rules

Add spacing between groups and handle whitespace

Handle comments as specified in your rules

Produce the final formatted code as a string

Be aware that this should be listening to a regex configurator.

You're right, I missed this important detail. The code does indeed have dynamic group creation based on import paths matching a specific pattern.

Dynamic Import Grouping by Path Pattern

The formatter analyzes import paths to dynamically create and organize groups based on module paths that match patterns like @app/{subfolder}/*.

Here's how this works:

Path Pattern Detection: The code uses a regular expression (appSubfolderPattern) to identify imports from paths that match @app/{subfolder}/*

Dynamic Group Registration: When an import path matching this pattern is found, it extracts the subfolder name and registers it as a dynamic group:

if (appSubfolderMatch?.[1]) {
    const subfolder = appSubfolderMatch[1];
    if (typeof configManager.registerAppSubfolder === 'function') {
        configManager.registerAppSubfolder(subfolder);
    }
}


Group Generation: This creates section comments like // @app/dossier, // @app/client, etc. based on the subfolder names

Sorting: Imports within these dynamic groups are then sorted according to the same rules as other groups

As you mentioned, this pattern is configurable via regex. The code uses config.regexPatterns.appSubfolderPattern to identify these dynamic groups.

In your configuration, you should be able to define this regex pattern to match the import paths for which you want to create dynamic groups. For example, a regex like:

appSubfolderPattern: /@app\/([^/]+)/


This captures the subfolder name from imports that match @app/{subfolder}/*, creating separate groups for each unique subfolder found.

Your example shows exactly how this works in practice, with dynamic group comments created for @app/dossier, @app/client, and @app/notification, each containing the relevant imports with proper alignment.